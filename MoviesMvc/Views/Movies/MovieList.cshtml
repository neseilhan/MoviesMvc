@model List<MovieModel>

@{ ViewBag.Title = "Movie List"; }

@*<div class="paddingtop">*@ @* Layout view'ında RenderBody() üzerinde yazıldı *@
<h2>@ViewBag.Title</h2>

@if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
{
@Html.ActionLink("New Movie", "Create")}

@if (TempData["Message"] != null)
{
<p class="text-secondary">
    @TempData["Message"]
</p>}

<table class="table">
    <tr>
        <th>
            Name
        </th>
        <th>
            Production Year
        </th>
        <th>
            Box Office Return
        </th>
        <th>
            Directors
        </th>
        <th>

        </th>
    </tr>
    @foreach (MovieModel movie in Model)
    {
<tr>
    <td>
        @movie.Name
    </td>
    <td>
        @movie.ProductionYear
    </td>
    <td>
        @movie.BoxOfficeReturn
    </td>
    <td>

        @{ string directors = "";
            foreach (DirectorModel director in movie.Directors)
            {
                directors += "<i>" + director.Name + " " + director.Surname + "</i><br />";
            }                
            
            }
        @Html.Raw(directors) 

    </td>
    <td>
        @Html.ActionLink("Details", "Details", new { id = movie.Id }) |
        @Html.ActionLink("Edit", "Edit", new { id = movie.Id }) |


        @Html.ActionLink("Delete", "Delete", new { id = movie.Id })
    </td>
</tr>}
</table>
